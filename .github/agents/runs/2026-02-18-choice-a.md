# CHARGE-SWAPCHAIN-RECREATION — 2026-02-18

**Macro**: charge | **Agents**: C++ Lead → Vulkan Guru | **Status**: completed

## Agent Summary

| Agent | Finding |
|-------|---------|
| C++ Lead | - [ ] `src/vulkan_mechanics/Mechanics.cpp` — Review the `Swapchain::recreate` function to ensure proper resource cleanup and error handling during swapchain recreation. [RISK: medium] |
| Vulkan Guru | - [ ] `src/engine/CapitalEngine.cpp` — Add error handling for `mechanics.swapchain.recreate` to ensure failures are properly managed. [RISK: medium] |

## TODOs

- [ ] `src/vulkan_mechanics/Mechanics.cpp` — Review the `Swapchain::recreate` function to ensure proper resource cleanup and error handling during swapchain recreation. [RISK: medium]
- [ ] `src/vulkan_mechanics/Mechanics.cpp` — Verify that the synchronization objects passed to `Swapchain::recreate` are correctly handled and reset. [RISK: medium]
- [ ] `src/vulkan_mechanics/Mechanics.cpp` — Ensure that the swapchain images are properly transitioned to the correct layout after recreation. [RISK: medium]
- [ ] `shaders/Engine.comp` — Verify that the shader code is compatible with the new swapchain images and formats. [RISK: low]
- [ ] `shaders/PostFX.comp` — Verify that the shader code is compatible with the new swapchain images and f
- [ ] `src/engine/CapitalEngine.cpp` — Add error handling for `mechanics.swapchain.recreate` to ensure failures are properly managed. [RISK: medium]
- [ ] `src/engine/CapitalEngine.cpp` — Add logging to provide visibility into the swapchain recreation process, including success or failure messages. [RISK: low]
- [ ] `src/engine/CapitalEngine.cpp` — Ensure proper cleanup of old swapchain resources (e.g., images, framebuffers, command buffers) before creating a new swapchain. [RISK: high]
- [ ] `src/vulkan_base/VulkanBaseSync.cpp` — Validate synchronization objects (e.g., semaphores, fences) to ensure they are properly reset or recreated during swapchain recreation. [RISK: medium]
- [ ] `src/vulkan_base/VulkanBaseResources.cpp` — Verify that resources tied to the old swapchain (e.g., images, buffers) are released correctly. [RISK: high]
- [ ] GUILD:GPU-Pipeline — Validate that the new swapchain's image layouts and formats are compatible with the shaders and pipeline configurations. [RISK: high]
- [ ] GUILD:GPU-Pipeline — Ensure that any barriers or synchronization points required for the new swapchain are correctly placed. [RISK: high]
- [ ] `src/engine/CapitalEngine.cpp` — Review the naming conventions and structure of the `recreate_swapchain` function to ensure consistency with project standards. [RISK:

## C++ Lead
---

## TODOs

### Vulkan Guru TODOs
- [ ] `src/vulkan_mechanics/Mechanics.cpp` — Review the `Swapchain::recreate` function to ensure proper resource cleanup and error handling during swapchain recreation. [RISK: medium]
- [ ] `src/vulkan_mechanics/Mechanics.cpp` — Verify that the synchronization objects passed to `Swapchain::recreate` are correctly handled and reset. [RISK: medium]
- [ ] `src/vulkan_mechanics/Mechanics.cpp` — Ensure that the swapchain images are properly transitioned to the correct layout after recreation. [RISK: medium]

### Kernel Expert TODOs
- [ ] `shaders/Engine.comp` — Verify that the shader code is compatible with the new swapchain images and formats. [RISK: low]
- [ ] `shaders/PostFX.comp` — Verify that the shader code is compatible with the new swapchain images and f

... [output truncated by factory gate] ...

## Vulkan Guru
---

## TODOs
### Vulkan Guru TODOs
- [ ] `src/engine/CapitalEngine.cpp` — Add error handling for `mechanics.swapchain.recreate` to ensure failures are properly managed. [RISK: medium]
- [ ] `src/engine/CapitalEngine.cpp` — Add logging to provide visibility into the swapchain recreation process, including success or failure messages. [RISK: low]
- [ ] `src/engine/CapitalEngine.cpp` — Ensure proper cleanup of old swapchain resources (e.g., images, framebuffers, command buffers) before creating a new swapchain. [RISK: high]
- [ ] `src/vulkan_base/VulkanBaseSync.cpp` — Validate synchronization objects (e.g., semaphores, fences) to ensure they are properly reset or recreated during swapchain recreation. [RISK: medium]
- [ ] `src/vulkan_base/VulkanBaseResources.cpp` — Verify that resources tied to the old swapchain (e.g., images, buffers) are released correctly. [RISK: high]

### Kernel Expert TODOs
- [ ] GUILD:GPU-Pipeline — Validate that the new swapchain's image layouts and formats are compatible with the shaders and pipeline configurations. [RISK: high]
- [ ] GUILD:GPU-Pipeline — Ensure that any barriers or synchronization points required for the new swapchain are correctly placed. [RISK: high]

### Refactorer TODOs
- [ ] `src/engine/CapitalEngine.cpp` — Review the naming conventions and structure of the `recreate_swapchain` function to ensure consistency with project standards. [RISK: 

... [output truncated by factory gate] ...

## Next Run

- **C++ Lead**: - **Next Agent**: Vulkan Guru
- **Task Command**: Review and refine the swapchain recreation process, focusing on Vulkan resource semantics and synchronization.

---
- **Vulkan Guru**: - **Next Agent:** Kernel Expert
- **Task Command:** CHARGE-SWAPCHAIN-RECREATION

## Factory Metrics (trailing 7 days)

| Metric | Value |
|--------|-------|
| Total agent calls | 2 |
| Pass rate | 1/2 (50%) |
| Retry rate | 0/2 |
| Halt rate | 0/2 |
| Warn rate | 1/2 |
| Cache hit rate | 0/2 (0%) |
| Avg latency | 7300ms |

### Agent Reliability

| Agent | Pass Rate |
|-------|----------|
| C++ Lead | 0/1 (0%) |
| Vulkan Guru | 1/1 (100%) |
