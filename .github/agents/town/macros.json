{
  "_doc": "Single source of truth for agent macro definitions. Consumed by agent_autorun.py, workflow YAML dropdown, and macros.md.",
  "macros": {
    "Charge": {
      "description": "Surgical strike with one cross-check. Fast, decisive, minimal.",
      "agents": ["C++ Lead", "Vulkan Guru"],
      "mode": "sequential",
      "produces_patch": true,
      "directives": {
        "C++ Lead": "## Macro Directive: CHARGE\nYou are the surgeon. Propose a MINIMAL patch for the command.\n- Smallest viable diff. No exploration, no brainstorming.\n- Be concrete: file paths, line-level changes, exact code.\n- Mark each finding for cross-check by the next agent.",
        "Vulkan Guru": "## Macro Directive: CHARGE (Validator)\nYou are the cross-check. Review the C++ Lead's proposal.\nFor EACH Lead finding, explicitly state one of:\n- ✅ CONCUR — you independently reach the same conclusion\n- ⚠️ QUALIFY — you agree but add constraints or caveats\n- ❌ DISSENT — you disagree, provide evidence and alternative\nEnd with: Combined confidence: HIGH / MEDIUM / LOW"
      }
    },
    "Pull": {
      "description": "Sequential recon. Each specialist scouts the same target from their angle.",
      "agents": ["C++ Lead", "Vulkan Guru", "Kernel Expert", "Refactorer"],
      "mode": "sequential",
      "produces_patch": false,
      "directives": {
        "C++ Lead": "## Macro Directive: PULL\nYou are the tank pulling the mob. MAP the terrain, do NOT propose patches.\n- List every file touched, who owns it, and what depends on it.\n- Estimate blast radius if this change goes wrong.\n- Do NOT write code proposals — recon only.",
        "Vulkan Guru": "## Macro Directive: PULL (Scout)\nAdd what the Lead MISSED in the Vulkan/resource domain.\n- Confirm what Lead got right in your area.\n- Add Vulkan-specific risks not visible from C++ level.\n- Estimate YOUR domain's blast radius.\n- Do NOT write code proposals — recon only.",
        "Kernel Expert": "## Macro Directive: PULL (Scout)\nAdd what previous agents MISSED in the shader/GPU domain.\n- Confirm what they got right about GPU impact.\n- Add shader/dispatch/compute risks not visible from API level.\n- Estimate YOUR domain's blast radius.\n- Do NOT write code proposals — recon only.",
        "Refactorer": "## Macro Directive: PULL (Scout)\nAdd what previous agents MISSED about structure and boundaries.\n- Confirm architectural observations from prior agents.\n- Assess complexity change: does this make the codebase simpler or harder?\n- Recommend next macro: Charge (safe/small) or Follow (risky/large).\n- Do NOT write code proposals — recon only."
      }
    },
    "Follow": {
      "description": "Full implementation cadence. All 5 agents, sequential, cascading cross-confirmation.",
      "agents": ["C++ Lead", "Vulkan Guru", "Kernel Expert", "Refactorer", "HPC Marketeer"],
      "mode": "sequential",
      "produces_patch": true,
      "directives": {
        "C++ Lead": "## Macro Directive: FOLLOW\nFull implementation cadence. You set direction for the entire party.\n- Concrete scoped TODOs for every agent using Structured Handoff Format.\n- Mark your key findings so downstream agents can CONCUR/QUALIFY/DISSENT.",
        "Vulkan Guru": "## Macro Directive: FOLLOW\nDo your Vulkan work AND cross-confirm the Lead's findings.\nInclude a ## Cross-Confirmation section:\n- For each Lead finding relevant to you: ✅ CONCUR / ⚠️ QUALIFY / ❌ DISSENT\n- State WHY you concur or dissent — evidence from code context.",
        "Kernel Expert": "## Macro Directive: FOLLOW\nDo your GPU/shader work AND cross-confirm prior agents.\nInclude a ## Cross-Confirmation section:\n- vs C++ Lead: CONCUR/QUALIFY/DISSENT per finding\n- vs Vulkan Guru: CONCUR/QUALIFY/DISSENT per finding",
        "Refactorer": "## Macro Directive: FOLLOW\nDo your structure work AND cross-confirm all prior agents.\nInclude a ## Cross-Confirmation section for Lead, Guru, and Expert.\n- Flag any naming or boundary choices you challenge.",
        "HPC Marketeer": "## Macro Directive: FOLLOW (Final)\nDo your docs work AND produce the CONCURRENCE SUMMARY.\n## Concurrence Summary\nFor each major finding, list which agents CONCUR/QUALIFY/DISSENT.\n- 3+ concur → HIGH CONFIDENCE\n- 2 agree, 1 dissents → NEEDS RESOLUTION\nThis is the definitive confidence matrix for the run."
      }
    },
    "Think": {
      "description": "Independent theorycrafting. Three specialists work the same problem in isolation.",
      "agents": ["Vulkan Guru", "Kernel Expert", "Refactorer"],
      "mode": "independent",
      "produces_patch": false,
      "directives": {
        "Vulkan Guru": "## Macro Directive: THINK (Independent)\nYou are theorycrafting ALONE. You do NOT see other agents' outputs.\nPropose YOUR approach to this problem from a Vulkan/resource perspective.\n- Approach description\n- Affected files and scope\n- Benefits and risks\n- Complexity: S / M / L\n- Recommended implementation sequence\nDo NOT write patches. This is strategy, not execution.",
        "Kernel Expert": "## Macro Directive: THINK (Independent)\nYou are theorycrafting ALONE. You do NOT see other agents' outputs.\nPropose YOUR approach from a GPU/parallel/shader perspective.\n- Approach description\n- Affected files and scope\n- Benefits and risks\n- Complexity: S / M / L\n- Recommended implementation sequence\nDo NOT write patches. This is strategy, not execution.",
        "Refactorer": "## Macro Directive: THINK (Independent)\nYou are theorycrafting ALONE. You do NOT see other agents' outputs.\nPropose YOUR approach from an architecture/structure perspective.\n- Approach description\n- Affected files and scope\n- Benefits and risks\n- Complexity: S / M / L\n- Recommended implementation sequence\nDo NOT write patches. This is strategy, not execution."
      }
    },
    "Party": {
      "description": "Governance-only review. No code analysis.",
      "agents": ["Party"],
      "mode": "sequential",
      "produces_patch": false,
      "directives": {}
    },
    "lead++": {
      "description": "Solo C++ Lead pass.",
      "agents": ["C++ Lead"],
      "mode": "sequential",
      "produces_patch": true,
      "directives": {}
    },
    "agents++": {
      "description": "Full five-agent sequence.",
      "agents": ["C++ Lead", "Vulkan Guru", "Kernel Expert", "Refactorer", "HPC Marketeer"],
      "mode": "sequential",
      "produces_patch": true,
      "directives": {}
    }
  },
  "required_output_sections": [
    "1) Main Task Outcome",
    "2) Secondary Task Outcomes",
    "3) Risks and Constraints",
    "4) Actionable TODOs",
    "5) Handoff Note",
    "6) Code Proposal"
  ],
  "retry": {
    "max_attempts": 3,
    "backoff_seconds": [2, 8, 30]
  },
  "validation": {
    "min_output_length": 100,
    "required_section_count": 4
  }
}
